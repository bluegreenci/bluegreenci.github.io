---
import Link from '@/components/Link.astro'
import ThemeToggle from '@/components/ThemeToggle.astro'
import MobileMenu from '@/components/ui/mobile-menu'
import { NAV_LINKS } from '@/consts'
import { Icon } from 'astro-icon/components'

const isExternalLink = (href: string) => {
  return href.startsWith('http')
}
---

<header
  class="pt-safe sticky top-0 z-30 border-b border-white/40 bg-white/70 backdrop-blur-xl transition dark:border-white/10 dark:bg-slate-900/70"
  transition:persist
>
  <div
    class="flex flex-wrap items-center justify-between gap-4 px-4 py-3"
  >
    <Link
      href="/"
      class="flex shrink-0 items-center text-2xl font-semibold"
      aria-label="BlueGreen home"
    >
      <span class="runbook-logo flex items-center gap-2">
        <span aria-hidden="true">âœ¦</span>
        <span>BlueGreen</span>
      </span>
    </Link>
    <div class="flex items-center gap-2 md:gap-4">
      <nav class="hidden items-center gap-4 text-sm sm:gap-6 md:flex">
        {
          NAV_LINKS.map((item) => {
            const isExternal = isExternalLink(item.href)
            const isInsideLink = item.label.toLowerCase() === 'inside'
            return (
              <Link
                href={item.href}
                class={
                  isInsideLink
                    ? 'flex items-center gap-1.5 font-semibold text-emerald-600 capitalize transition-colors hover:text-emerald-500'
                    : 'flex items-center gap-1.5 text-slate-600 capitalize transition-colors hover:text-slate-900'
                }
              >
                <span>{item.label}</span>
                {isExternal && (
                  <Icon
                    name="lucide:external-link"
                    class={
                      isInsideLink
                        ? 'size-3.5 flex-shrink-0 text-emerald-500 opacity-80'
                        : 'size-3.5 flex-shrink-0 opacity-70'
                    }
                    aria-hidden="true"
                  />
                )}
              </Link>
            )
          })
        }
      </nav>
      <div
        class="hidden h-6 w-px bg-white/60 md:block dark:bg-white/15"
        aria-hidden="true"
      >
      </div>
      <MobileMenu client:idle transition:persist />
      <ThemeToggle transition:persist />
    </div>
  </div>
</header>
